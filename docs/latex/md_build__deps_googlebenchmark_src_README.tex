\href{https://github.com/google/benchmark/actions?query=workflow\%3Abuild-and-test}{\texttt{ }} \href{https://github.com/google/benchmark/actions/workflows/bazel.yml}{\texttt{ }} \href{https://github.com/google/benchmark/actions?query=workflow\%3Apylint}{\texttt{ }} \href{https://github.com/google/benchmark/actions?query=workflow\%3Atest-bindings}{\texttt{ }}

\href{https://travis-ci.org/google/benchmark}{\texttt{ }} \href{https://coveralls.io/r/google/benchmark}{\texttt{ }}

A library to benchmark code snippets, similar to unit tests. Example\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{ \{c++\}}
\DoxyCodeLine{\#include <benchmark/benchmark.h>}
\DoxyCodeLine{}
\DoxyCodeLine{static void BM\_SomeFunction(benchmark::State\& state) \{}
\DoxyCodeLine{  // Perform setup here}
\DoxyCodeLine{  for (auto \_ : state) \{}
\DoxyCodeLine{    // This code gets timed}
\DoxyCodeLine{    SomeFunction();}
\DoxyCodeLine{  \}}
\DoxyCodeLine{\}}
\DoxyCodeLine{// Register the function as a benchmark}
\DoxyCodeLine{BENCHMARK(BM\_SomeFunction);}
\DoxyCodeLine{// Run the benchmark}
\DoxyCodeLine{BENCHMARK\_MAIN();}

\end{DoxyCode}
\hypertarget{md_build__deps_googlebenchmark_src_README_autotoc_md68}{}\doxysection{Getting Started}\label{md_build__deps_googlebenchmark_src_README_autotoc_md68}
To get started, see \href{\#requirements}{\texttt{ Requirements}} and \href{\#installation}{\texttt{ Installation}}. See \href{\#usage}{\texttt{ Usage}} for a full example and the \mbox{\hyperlink{md_build__deps_googlebenchmark_src_docs_user_guide}{User Guide}} for a more comprehensive feature overview.

It may also help to read the \href{https://github.com/google/googletest/blob/main/docs/primer.md}{\texttt{ Google Test documentation}} as some of the structural aspects of the APIs are similar.\hypertarget{md_build__deps_googlebenchmark_src_README_autotoc_md69}{}\doxysection{Resources}\label{md_build__deps_googlebenchmark_src_README_autotoc_md69}
\href{https://groups.google.com/d/forum/benchmark-discuss}{\texttt{ Discussion group}}

IRC channels\+:
\begin{DoxyItemize}
\item \href{https://libera.chat}{\texttt{ libera}} \mbox{\hyperlink{namespacebenchmark}{benchmark}}
\end{DoxyItemize}

\mbox{\hyperlink{md_build__deps_googlebenchmark_src_docs_tools}{Additional Tooling Documentation}}

\mbox{\hyperlink{md_build__deps_googlebenchmark_src_docs_AssemblyTests}{Assembly Testing Documentation}}

\mbox{\hyperlink{md_build__deps_googlebenchmark_src_docs_python_bindings}{Building and installing Python bindings}}\hypertarget{md_build__deps_googlebenchmark_src_README_autotoc_md70}{}\doxysection{Requirements}\label{md_build__deps_googlebenchmark_src_README_autotoc_md70}
The library can be used with C++03. However, it requires C++11 to build, including compiler and standard library support.

The following minimum versions are required to build the library\+:


\begin{DoxyItemize}
\item GCC 4.\+8
\item Clang 3.\+4
\item Visual Studio 14 2015
\item Intel 2015 Update 1
\end{DoxyItemize}

See \mbox{\hyperlink{md_build__deps_googlebenchmark_src_docs_platform_specific_build_instructions}{Platform-\/\+Specific Build Instructions}}.\hypertarget{md_build__deps_googlebenchmark_src_README_autotoc_md71}{}\doxysection{Installation}\label{md_build__deps_googlebenchmark_src_README_autotoc_md71}
This describes the installation process using cmake. As pre-\/requisites, you\textquotesingle{}ll need git and cmake installed.

{\itshape See \mbox{\hyperlink{md_build__deps_googlebenchmark_src_docs_dependencies}{dependencies.md}} for more details regarding supported versions of build tools.}


\begin{DoxyCode}{0}
\DoxyCodeLine{\# Check out the library.}
\DoxyCodeLine{\$ git clone https://github.com/google/benchmark.git}
\DoxyCodeLine{\# Go to the library root directory}
\DoxyCodeLine{\$ cd benchmark}
\DoxyCodeLine{\# Make a build directory to place the build output.}
\DoxyCodeLine{\$ cmake -\/E make\_directory "{}build"{}}
\DoxyCodeLine{\# Generate build system files with cmake, and download any dependencies.}
\DoxyCodeLine{\$ cmake -\/E chdir "{}build"{} cmake -\/DBENCHMARK\_DOWNLOAD\_DEPENDENCIES=on -\/DCMAKE\_BUILD\_TYPE=Release ../}
\DoxyCodeLine{\# or, starting with CMake 3.13, use a simpler form:}
\DoxyCodeLine{\# cmake -\/DCMAKE\_BUILD\_TYPE=Release -\/S . -\/B "{}build"{}}
\DoxyCodeLine{\# Build the library.}
\DoxyCodeLine{\$ cmake -\/-\/build "{}build"{} -\/-\/config Release}

\end{DoxyCode}
 This builds the {\ttfamily benchmark} and {\ttfamily benchmark\+\_\+main} libraries and tests. On a unix system, the build directory should now look something like this\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{/benchmark}
\DoxyCodeLine{  /build}
\DoxyCodeLine{    /src}
\DoxyCodeLine{      /libbenchmark.a}
\DoxyCodeLine{      /libbenchmark\_main.a}
\DoxyCodeLine{    /test}
\DoxyCodeLine{      ...}

\end{DoxyCode}


Next, you can run the tests to check the build.


\begin{DoxyCode}{0}
\DoxyCodeLine{\$ cmake -\/E chdir "{}build"{} ctest -\/-\/build-\/config Release}

\end{DoxyCode}


If you want to install the library globally, also run\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{sudo cmake -\/-\/build "{}build"{} -\/-\/config Release -\/-\/target install}

\end{DoxyCode}


Note that Google Benchmark requires Google Test to build and run the tests. This dependency can be provided two ways\+:


\begin{DoxyItemize}
\item Checkout the Google Test sources into {\ttfamily benchmark/googletest}.
\item Otherwise, if {\ttfamily -\/DBENCHMARK\+\_\+\+DOWNLOAD\+\_\+\+DEPENDENCIES=ON} is specified during configuration as above, the library will automatically download and build any required dependencies.
\end{DoxyItemize}

If you do not wish to build and run the tests, add {\ttfamily -\/DBENCHMARK\+\_\+\+ENABLE\+\_\+\+GTEST\+\_\+\+TESTS=OFF} to {\ttfamily CMAKE\+\_\+\+ARGS}.\hypertarget{md_build__deps_googlebenchmark_src_README_autotoc_md72}{}\doxysubsection{Debug vs Release}\label{md_build__deps_googlebenchmark_src_README_autotoc_md72}
By default, benchmark builds as a debug library. You will see a warning in the output when this is the case. To build it as a release library instead, add {\ttfamily -\/DCMAKE\+\_\+\+BUILD\+\_\+\+TYPE=Release} when generating the build system files, as shown above. The use of {\ttfamily -\/-\/config Release} in build commands is needed to properly support multi-\/configuration tools (like Visual Studio for example) and can be skipped for other build systems (like Makefile).

To enable link-\/time optimisation, also add {\ttfamily -\/DBENCHMARK\+\_\+\+ENABLE\+\_\+\+LTO=true} when generating the build system files.

If you are using gcc, you might need to set {\ttfamily GCC\+\_\+\+AR} and {\ttfamily GCC\+\_\+\+RANLIB} cmake cache variables, if autodetection fails.

If you are using clang, you may need to set {\ttfamily LLVMAR\+\_\+\+EXECUTABLE}, {\ttfamily LLVMNM\+\_\+\+EXECUTABLE} and {\ttfamily LLVMRANLIB\+\_\+\+EXECUTABLE} cmake cache variables.

To enable sanitizer checks (eg., {\ttfamily asan} and {\ttfamily tsan}), add\+: 
\begin{DoxyCode}{0}
\DoxyCodeLine{-\/DCMAKE\_C\_FLAGS="{}-\/g -\/O2 -\/fno-\/omit-\/frame-\/pointer -\/fsanitize=address -\/fsanitize=thread -\/fno-\/sanitize-\/recover=all"{}}
\DoxyCodeLine{-\/DCMAKE\_CXX\_FLAGS="{}-\/g -\/O2 -\/fno-\/omit-\/frame-\/pointer -\/fsanitize=address -\/fsanitize=thread -\/fno-\/sanitize-\/recover=all "{}  }

\end{DoxyCode}
\hypertarget{md_build__deps_googlebenchmark_src_README_autotoc_md73}{}\doxysubsection{Stable and Experimental Library Versions}\label{md_build__deps_googlebenchmark_src_README_autotoc_md73}
The main branch contains the latest stable version of the benchmarking library; the API of which can be considered largely stable, with source breaking changes being made only upon the release of a new major version.

Newer, experimental, features are implemented and tested on the \href{https://github.com/google/benchmark/tree/v2}{\texttt{ {\ttfamily v2} branch}}. Users who wish to use, test, and provide feedback on the new features are encouraged to try this branch. However, this branch provides no stability guarantees and reserves the right to change and break the API at any time.\hypertarget{md_build__deps_googlebenchmark_src_README_autotoc_md74}{}\doxysection{Usage}\label{md_build__deps_googlebenchmark_src_README_autotoc_md74}
\hypertarget{md_build__deps_googlebenchmark_src_README_autotoc_md75}{}\doxysubsection{Basic usage}\label{md_build__deps_googlebenchmark_src_README_autotoc_md75}
Define a function that executes the code to measure, register it as a benchmark function using the {\ttfamily BENCHMARK} macro, and ensure an appropriate {\ttfamily main} function is available\+:


\begin{DoxyCode}{0}
\DoxyCodeLine{ \{c++\}}
\DoxyCodeLine{\#include <benchmark/benchmark.h>}
\DoxyCodeLine{}
\DoxyCodeLine{static void BM\_StringCreation(benchmark::State\& state) \{}
\DoxyCodeLine{  for (auto \_ : state)}
\DoxyCodeLine{    std::string empty\_string;}
\DoxyCodeLine{\}}
\DoxyCodeLine{// Register the function as a benchmark}
\DoxyCodeLine{BENCHMARK(BM\_StringCreation);}
\DoxyCodeLine{}
\DoxyCodeLine{// Define another benchmark}
\DoxyCodeLine{static void BM\_StringCopy(benchmark::State\& state) \{}
\DoxyCodeLine{  std::string x = "{}hello"{};}
\DoxyCodeLine{  for (auto \_ : state)}
\DoxyCodeLine{    std::string copy(x);}
\DoxyCodeLine{\}}
\DoxyCodeLine{BENCHMARK(BM\_StringCopy);}
\DoxyCodeLine{}
\DoxyCodeLine{BENCHMARK\_MAIN();}

\end{DoxyCode}


To run the benchmark, compile and link against the {\ttfamily benchmark} library (libbenchmark.\+a/.so). If you followed the build steps above, this library will be under the build directory you created.


\begin{DoxyCode}{0}
\DoxyCodeLine{\# Example on linux after running the build steps above. Assumes the}
\DoxyCodeLine{\# `benchmark` and `build` directories are under the current directory.}
\DoxyCodeLine{\$ g++ mybenchmark.cc -\/std=c++11 -\/isystem benchmark/include \(\backslash\)}
\DoxyCodeLine{  -\/Lbenchmark/build/src -\/lbenchmark -\/lpthread -\/o mybenchmark}

\end{DoxyCode}


Alternatively, link against the {\ttfamily benchmark\+\_\+main} library and remove {\ttfamily \mbox{\hyperlink{benchmark_8h_a76a768260eed180721a82b78d1bcfe95}{BENCHMARK\+\_\+\+MAIN()}};} above to get the same behavior.

The compiled executable will run all benchmarks by default. Pass the {\ttfamily -\/-\/help} flag for option information or see the \mbox{\hyperlink{md_build__deps_googlebenchmark_src_docs_user_guide}{User Guide}}.\hypertarget{md_build__deps_googlebenchmark_src_README_autotoc_md76}{}\doxysubsection{Usage with CMake}\label{md_build__deps_googlebenchmark_src_README_autotoc_md76}
If using CMake, it is recommended to link against the project-\/provided {\ttfamily benchmark\+::benchmark} and {\ttfamily benchmark\+::benchmark\+\_\+main} targets using {\ttfamily target\+\_\+link\+\_\+libraries}. It is possible to use {\ttfamily find\+\_\+package} to import an installed version of the library. 
\begin{DoxyCode}{0}
\DoxyCodeLine{find\_package(benchmark REQUIRED)}

\end{DoxyCode}
 Alternatively, {\ttfamily add\+\_\+subdirectory} will incorporate the library directly in to one\textquotesingle{}s CMake project. 
\begin{DoxyCode}{0}
\DoxyCodeLine{add\_subdirectory(benchmark)}

\end{DoxyCode}
 Either way, link to the library as follows. 
\begin{DoxyCode}{0}
\DoxyCodeLine{target\_link\_libraries(MyTarget benchmark::benchmark)}

\end{DoxyCode}
 